<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="viewengine.js"></script>
    <!-- <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> -->
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <script type="text/javascript">
function run() {
    window.sbug = document.getElementById('sbug').textContent;
    window.engine = new Vngin();
    try { engine.loadScript(sbug); } catch (e) { console.log(e.stack); }
    var script_load = new engine.fields.SCRIPT_LOAD();
    document.body.appendChild(script_load.node);
    // var script = new engine.fields.SCRIPT();
    // document.body.appendChild(script.node);

}
window.addEventListener('load', run);

    </script>
    <script type="text/bug" id="sbug">
!component scriptBox {
<div>
    <textarea class="-vnc-textarea -vnc-scriptbox"></textarea>
    <input class="-vnc-button" type="button" value="RUN"/>
</div>
} {
    this.init = function () {
        var _this = this;
        this.node.getElementsByClassName("-vnc-button")[0].addEventListener("click", function (evt) {
            var script = _this.node.getElementsByClassName("-vnc-textarea")[0].value;
            try {
                (new Function(script)).call(window);
            } catch (e) {
                alert(e.msg);
                console.log(e);
                window._e = e;
            }
        });
    };
}~

!component ajaxLoad {
<span>
  <input type="text" /><input type="button" value="LOAD"/>
</span>
} {
    this.init = function (txt) {
        var _this = this;
        this.node.children[0].value = txt;
        this.node.children[1].addEventListener("click", function (event) {
            var url = _this.node.children[0].value;
            $.get(url).success(function (input) {
                engine.loadScript(input);
                engine.run && engine.run();
            });
        });
    };
}~

!field SCRIPT scriptBox;
!field SCRIPT_LOAD ajaxLoad("viewdemo.txt");
    </script>
    <style type="text/css">
body {font:12px Myriad,Helvetica,Tahoma,Arial,clean,sans-serif;}
.-vnc-field { overflow: hidden; width: 400px;float:left;height:26px;}
.-vnc-group {width: 800px;}
.-vnc-scriptbox {width: 600px; height: 200px;}
.-vnc-asterisk {color: red; width: 14px; text-align: right; display: inline-block;}
.-vnc-label {width: 180px; display: inline-block;}
.-vnc-select, .-vnc-input {width: 180px; padding: 0;}
table {border-collapse:collapse;}
table, th, td {border: 1px solid silver;}

    </style>
</head>
<body>
</body>
</html>
